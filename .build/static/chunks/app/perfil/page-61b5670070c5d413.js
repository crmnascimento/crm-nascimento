(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[550],{90728:function(e,s,t){Promise.resolve().then(t.bind(t,20513))},20513:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return k}});var r=t(15444),a=t(89300),n=t(75762),i=t(79047),l=t(74018),o=t(99827),c=t(2422),d=t(34635),u=t(85530),m=t(61335),h=t(57234),x="horizontal",f=["horizontal","vertical"],p=a.forwardRef((e,s)=>{let{decorative:t,orientation:a=x,...n}=e,i=f.includes(a)?a:x;return(0,r.jsx)(h.WV.div,{"data-orientation":i,...t?{role:"none"}:{"aria-orientation":"vertical"===i?i:void 0,role:"separator"},...n,ref:s})});p.displayName="Separator";var g=t(65522);let v=a.forwardRef(({className:e,orientation:s="horizontal",decorative:t=!0,...a},n)=>(0,r.jsx)(p,{ref:n,decorative:t,orientation:s,className:(0,g.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...a}));v.displayName=p.displayName;var j=t(4693),N=t(35798),b=t(75012),y=t(70691),w=t(70362),S=t(19484),E=t(66124),A=t(95854),T=t(35550);function k(){let{data:e,update:s}=(0,n.useSession)();(0,i.useRouter)();let{toast:t}=(0,A.pm)(),[h,x]=(0,a.useState)(""),[f,p]=(0,a.useState)(""),[g,k]=(0,a.useState)(""),[_,D]=(0,a.useState)(!1),[O,I]=(0,a.useState)(null),[C,R]=(0,a.useState)((0,T.uo)(""));(0,a.useEffect)(()=>{e?.user&&Z()},[e]),(0,a.useEffect)(()=>{R((0,T.uo)(f))},[f]);let Z=async()=>{try{let e=await fetch("/api/profile");if(e.ok){let s=await e.json();I(s)}}catch(e){console.error("Erro ao carregar perfil:",e)}},M=async()=>{if(!h||!f||!g){t({title:"Erro",description:"Preencha todos os campos obrigat\xf3rios.",variant:"destructive"});return}if(!C.isValid){t({title:"Senha inv\xe1lida",description:C.errors.join("\n"),variant:"destructive"});return}if(f!==g){t({title:"Erro",description:"A nova senha e a confirma\xe7\xe3o n\xe3o coincidem.",variant:"destructive"});return}if(h===f){t({title:"Erro",description:"A nova senha deve ser diferente da senha atual.",variant:"destructive"});return}D(!0);try{let e=await fetch("/api/profile/change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:h,newPassword:f})}),s=await e.json();e.ok?(t({title:"Sucesso",description:"Senha alterada com sucesso!"}),x(""),p(""),k(""),Z()):t({title:"Erro",description:s.message||"Erro ao alterar senha.",variant:"destructive"})}catch(e){console.error("Erro ao alterar senha:",e),t({title:"Erro",description:"Erro de conex\xe3o ao alterar senha.",variant:"destructive"})}finally{D(!1)}};return e?.user?(0,r.jsx)(l.L,{children:(0,r.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Meu Perfil"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Gerencie suas informa\xe7\xf5es pessoais e configura\xe7\xf5es de seguran\xe7a"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsx)(o.Ol,{children:(0,r.jsxs)(o.ll,{className:"flex items-center",children:[(0,r.jsx)(j.Z,{className:"h-5 w-5 mr-2"}),"Informa\xe7\xf5es Pessoais"]})}),(0,r.jsxs)(o.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{className:"text-sm font-medium text-gray-600",children:"Nome"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.user.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{className:"text-sm font-medium text-gray-600",children:"E-mail"}),(0,r.jsxs)("div",{className:"flex items-center mt-1",children:[(0,r.jsx)(N.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:e.user.email})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{className:"text-sm font-medium text-gray-600",children:"Fun\xe7\xe3o"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)(m.C,{className:(e=>{switch(e){case"VENDEDOR":return"bg-blue-100 text-blue-800";case"DIRETORIA":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})(e.user.role||""),children:(e=>{switch(e){case"VENDEDOR":return"Vendedor";case"DIRETORIA":return"Diretoria";default:return e}})(e.user.role||"")})})]}),O&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v,{}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{className:"text-sm font-medium text-gray-600",children:"Membro desde"}),(0,r.jsxs)("div",{className:"flex items-center mt-1",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:new Date(O.createdAt).toLocaleDateString("pt-BR")})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{className:"text-sm font-medium text-gray-600",children:"\xdaltima altera\xe7\xe3o de senha"}),(0,r.jsxs)("div",{className:"flex items-center mt-1",children:[(0,r.jsx)(y.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:O.lastPasswordChange?new Date(O.lastPasswordChange).toLocaleDateString("pt-BR"):"Nunca alterada"})]})]}),O.isTemporaryPassword&&(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)(w.Z,{className:"h-4 w-4 text-yellow-600 mt-0.5 mr-2"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"Senha Tempor\xe1ria"}),(0,r.jsx)("p",{className:"text-xs text-yellow-700 mt-1",children:"Voc\xea est\xe1 usando uma senha tempor\xe1ria. Altere sua senha agora para maior seguran\xe7a."})]})]})})]})]})]})}),(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[(0,r.jsxs)(o.ll,{className:"flex items-center",children:[(0,r.jsx)(S.Z,{className:"h-5 w-5 mr-2"}),"Alterar Senha"]}),(0,r.jsx)(o.SZ,{children:"Mantenha sua conta segura com uma senha forte"})]}),(0,r.jsxs)(o.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{htmlFor:"currentPassword",children:"Senha Atual *"}),(0,r.jsx)(u.W,{id:"currentPassword",value:h,onChange:e=>x(e.target.value),placeholder:"Digite sua senha atual",disabled:_})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{htmlFor:"newPassword",children:"Nova Senha *"}),(0,r.jsx)(u.W,{id:"newPassword",value:f,onChange:e=>p(e.target.value),placeholder:"Digite sua nova senha",showStrength:f.length>0,strength:C.strength,disabled:_}),f&&!C.isValid&&(0,r.jsxs)("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-red-800 mb-2",children:"Requisitos de senha:"}),(0,r.jsx)("ul",{className:"text-xs text-red-700 space-y-1",children:C.errors.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-1 h-1 bg-red-600 rounded-full mr-2"}),e]},s))})]}),f&&C.isValid&&(0,r.jsx)("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(E.Z,{className:"h-4 w-4 text-green-600 mr-2"}),(0,r.jsxs)("p",{className:"text-sm font-medium text-green-800",children:["Senha v\xe1lida! For\xe7a: ",(0,T.xy)(C.strength)]})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{htmlFor:"confirmPassword",children:"Confirmar Nova Senha *"}),(0,r.jsx)(u.W,{id:"confirmPassword",value:g,onChange:e=>k(e.target.value),placeholder:"Confirme sua nova senha",disabled:_}),g&&f!==g&&(0,r.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"As senhas n\xe3o coincidem"})]}),(0,r.jsx)("div",{className:"pt-4",children:(0,r.jsx)(c.z,{onClick:M,disabled:_||!C.isValid||f!==g||!h,className:"w-full bg-[#D4AF37] hover:bg-[#B8941F] text-black",children:_?"Alterando...":"Alterar Senha"})}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Dicas de Seguran\xe7a:"}),(0,r.jsxs)("ul",{className:"text-xs text-blue-800 space-y-1",children:[(0,r.jsx)("li",{children:"• Use uma combina\xe7\xe3o de letras mai\xfasculas e min\xfasculas"}),(0,r.jsx)("li",{children:"• Inclua n\xfameros e caracteres especiais"}),(0,r.jsx)("li",{children:"• Evite informa\xe7\xf5es pessoais \xf3bvias"}),(0,r.jsx)("li",{children:"• Use pelo menos 8 caracteres (recomendado: 12+)"}),(0,r.jsx)("li",{children:"• N\xe3o reutilize senhas de outras contas"})]})]})]})]})})]})]})}):null}},61335:function(e,s,t){"use strict";t.d(s,{C:function(){return l}});var r=t(15444);t(89300);var a=t(2371),n=t(65522);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...t}){return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:s}),e),...t})}},74678:function(e,s,t){"use strict";t.d(s,{I:function(){return i}});var r=t(15444),a=t(89300),n=t(65522);let i=a.forwardRef(({className:e,type:s,...t},a)=>(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));i.displayName="Input"},34635:function(e,s,t){"use strict";t.d(s,{_:function(){return c}});var r=t(15444),a=t(89300),n=t(4100),i=t(2371),l=t(65522);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(n.f,{ref:t,className:(0,l.cn)(o(),e),...s}));c.displayName=n.f.displayName},85530:function(e,s,t){"use strict";t.d(s,{W:function(){return d}});var r=t(15444),a=t(89300),n=t(52429),i=t(25422),l=t(74678),o=t(2422),c=t(65522);function d({className:e,showStrength:s=!1,strength:t="weak",...d}){let[u,m]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.I,{...d,type:u?"text":"password",className:(0,c.cn)("pr-10",e)}),(0,r.jsx)(o.z,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>m(!u),children:u?(0,r.jsx)(n.Z,{className:"h-4 w-4 text-gray-400"}):(0,r.jsx)(i.Z,{className:"h-4 w-4 text-gray-400"})})]}),s&&(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"flex h-2 w-full overflow-hidden rounded-full bg-gray-200",children:(0,r.jsx)("div",{className:(0,c.cn)("transition-all duration-300 ease-out",(()=>{switch(t){case"weak":return"bg-red-500";case"medium":return"bg-yellow-500";case"strong":return"bg-green-500";default:return"bg-gray-300"}})(),(()=>{switch(t){case"weak":return"w-1/3";case"medium":return"w-2/3";case"strong":return"w-full";default:return"w-0"}})())})}),(0,r.jsxs)("p",{className:(0,c.cn)("text-xs font-medium","weak"===t&&"text-red-600","medium"===t&&"text-yellow-600","strong"===t&&"text-green-600"),children:["For\xe7a da senha: ","weak"===t&&"Fraca","medium"===t&&"M\xe9dia","strong"===t&&"Forte"]})]})]})}},95854:function(e,s,t){"use strict";t.d(s,{pm:function(){return m}});var r=t(89300);let a=0,n=new Map,i=e=>{if(n.has(e))return;let s=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,s)},l=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},o=[],c={toasts:[]};function d(e){c=l(c,e),o.forEach(e=>{e(c)})}function u({...e}){let s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...e,id:s,open:!0,onOpenChange:e=>{e||t()}}}),{id:s,dismiss:t,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,s]=r.useState(c);return r.useEffect(()=>(o.push(s),()=>{let e=o.indexOf(s);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},35550:function(e,s,t){"use strict";function r(e){let s=[],t="weak";return e.length<8&&s.push("A senha deve ter pelo menos 8 caracteres"),/[A-Z]/.test(e)||s.push("A senha deve conter pelo menos uma letra mai\xfascula"),/\d/.test(e)||s.push("A senha deve conter pelo menos um n\xfamero"),/[a-z]/.test(e)||s.push("A senha deve conter pelo menos uma letra min\xfascula"),0===s.length&&(e.length>=12&&/[!@#$%^&*(),.?":{}|<>]/.test(e)?t="strong":e.length>=10&&(t="medium")),{isValid:0===s.length,errors:s,strength:t}}function a(e){return e.toLowerCase().endsWith("@nascimentoeadvogados.com.br")}function n(e){switch(e){case"weak":return"Fraca";case"medium":return"M\xe9dia";case"strong":return"Forte";default:return"Indefinida"}}t.d(s,{sI:function(){return a},uo:function(){return r},xy:function(){return n}}),t(91353)},75012:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(42154).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},35798:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(42154).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])}},function(e){e.O(0,[971,676,539,994,569,457,287,908,386,156,744],function(){return e(e.s=90728)}),_N_E=e.O()}]);