(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{79425:function(e,s,a){Promise.resolve().then(a.bind(a,57556))},57556:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return y}});var t=a(15444),l=a(89300),d=a(74018),r=a(99827),c=a(64624),i=a(83648),n=a(4464),x=a(58510),o=a(75012),m=a(64670),h=a(62492),j=a(66772),u=a(48803),N=a(57243),p=a(58238),g=a(5468),f=a(96516),v=a(86354),b=a(16014);function y(){let[e,s]=(0,l.useState)(null),[a,y]=(0,l.useState)(!0);(0,l.useEffect)(()=>{w()},[]);let w=async()=>{try{let e=await fetch("/api/dashboard/stats"),a=await e.json();s(a)}catch(e){console.error("Erro ao carregar estat\xedsticas:",e)}finally{y(!1)}},A=e=>{switch(e){case"NAO_CONTATADO":return"N\xe3o Contatado";case"POTENCIAL":return"Contato Realizado";case"EM_ANALISE":return"Qualifica\xe7\xe3o";case"PROCESSO_INICIADO":return"Proposta Enviada";case"VALOR_RECUPERADO":return"Negocia\xe7\xe3o";case"CONTRATO_ASSINADO":return"Fechado Ganho";case"PERDIDO":return"Fechado Perdido";default:return e}},O=["#EF4444","#F59E0B","#3B82F6","#10B981","#8B5CF6","#06B6D4","#6B7280"];return a?(0,t.jsx)(d.L,{requiredRole:"DIRETORIA",children:(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,t.jsx)("div",{className:"h-32 bg-gray-200 rounded"},e))})]})})}):(0,t.jsx)(d.L,{requiredRole:"DIRETORIA",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard Executivo"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Vis\xe3o geral do desempenho e m\xe9tricas do CRM"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,t.jsx)(r.Zb,{children:(0,t.jsx)(r.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,t.jsx)(c.Z,{className:"h-6 w-6 text-blue-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total de Leads"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:e?.totalLeads||0}),(0,t.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:["+",e?.recentLeads||0," nos \xfaltimos 30 dias"]})]})]})})}),(0,t.jsx)(r.Zb,{children:(0,t.jsx)(r.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,t.jsx)(i.Z,{className:"h-6 w-6 text-green-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Valor Total em Negocia\xe7\xe3o"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:e?.totalValue?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",notation:"compact",maximumFractionDigits:0}).format(e.totalValue):"R$ 0"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Valor estimado de recupera\xe7\xe3o"})]})]})})}),(0,t.jsx)(r.Zb,{children:(0,t.jsx)(r.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-3 bg-yellow-100 rounded-lg",children:(0,t.jsx)(n.Z,{className:"h-6 w-6 text-yellow-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Taxa de Convers\xe3o"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:e?.conversionRate?`${e.conversionRate.toFixed(1)}%`:"0%"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e?.contractedLeads||0," contratos assinados"]})]})]})})}),(0,t.jsx)(r.Zb,{children:(0,t.jsx)(r.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,t.jsx)(x.Z,{className:"h-6 w-6 text-purple-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Intera\xe7\xf5es Recentes"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:e?.recentInteractions||0}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\xdaltimos 7 dias"})]})]})})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,t.jsxs)(r.Zb,{children:[(0,t.jsxs)(r.Ol,{children:[(0,t.jsx)(r.ll,{children:"Funil de Vendas"}),(0,t.jsx)(r.SZ,{children:"Acompanhamento do pipeline de vendas"})]}),(0,t.jsx)(r.aY,{children:(0,t.jsx)("div",{className:"h-80",children:(0,t.jsx)(u.h,{width:"100%",height:"100%",children:(0,t.jsxs)(N.v,{data:e?.leadsPerStatus?.map((e,s)=>({name:A(e.status),value:e.count,color:O[s%O.length]}))||[],margin:{top:5,right:30,left:20,bottom:5},children:[(0,t.jsx)(p.q,{strokeDasharray:"3 3"}),(0,t.jsx)(g.K,{dataKey:"name",tick:{fontSize:9},tickLine:!1,angle:-45,textAnchor:"end",height:60}),(0,t.jsx)(f.B,{tick:{fontSize:10},tickLine:!1}),(0,t.jsx)(v.u,{}),(0,t.jsx)(b.$,{dataKey:"value",fill:"#D4AF37",radius:[4,4,0,0]})]})})})})]}),(0,t.jsxs)(r.Zb,{children:[(0,t.jsxs)(r.Ol,{children:[(0,t.jsx)(r.ll,{children:"Desempenho do Vendedor"}),(0,t.jsx)(r.SZ,{children:"M\xe9tricas de produtividade atual"})]}),(0,t.jsx)(r.aY,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(x.Z,{className:"h-5 w-5 text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-blue-900",children:"Taxa de Contato"}),(0,t.jsx)("p",{className:"text-sm text-blue-600",children:"Leads contatados vs total"})]})]}),(0,t.jsx)("span",{className:"text-2xl font-bold text-blue-900",children:(e?.totalLeads||0)>0&&e?`${((e.totalLeads-(e.leadsPerStatus?.find(e=>"NAO_CONTATADO"===e.status)?.count||0))/e.totalLeads*100).toFixed(1)}%`:"0%"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(n.Z,{className:"h-5 w-5 text-green-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-green-900",children:"Meta do M\xeas"}),(0,t.jsx)("p",{className:"text-sm text-green-600",children:"Contratos vs meta (15)"})]})]}),(0,t.jsxs)("span",{className:"text-2xl font-bold text-green-900",children:[e?.contractedLeads||0,"/15"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(o.Z,{className:"h-5 w-5 text-yellow-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-yellow-900",children:"Atividade Semanal"}),(0,t.jsx)("p",{className:"text-sm text-yellow-600",children:"Intera\xe7\xf5es dos \xfaltimos 7 dias"})]})]}),(0,t.jsx)("span",{className:"text-2xl font-bold text-yellow-900",children:e?.recentInteractions||0})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(m.Z,{className:"h-5 w-5 text-purple-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-purple-900",children:"Produtividade"}),(0,t.jsx)("p",{className:"text-sm text-purple-600",children:"Intera\xe7\xf5es por lead ativo"})]})]}),(0,t.jsx)("span",{className:"text-2xl font-bold text-purple-900",children:(e?.totalLeads||0)>0&&e?((e.recentInteractions||0)/e.totalLeads).toFixed(1):"0.0"})]})]})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(r.Zb,{children:[(0,t.jsxs)(r.Ol,{children:[(0,t.jsxs)(r.ll,{className:"flex items-center",children:[(0,t.jsx)(h.Z,{className:"h-5 w-5 mr-2"}),"Atividades Recentes do Vendedor"]}),(0,t.jsx)(r.SZ,{children:"\xdaltimas intera\xe7\xf5es e atualiza\xe7\xf5es realizadas"})]}),(0,t.jsx)(r.aY,{children:(0,t.jsx)("div",{className:"space-y-4",children:e?.recentInteractions===0?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(h.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma atividade recente"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Quando houver intera\xe7\xf5es com leads, elas aparecer\xe3o aqui."})]}):(0,t.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 rounded-lg",children:[(0,t.jsx)("div",{className:"bg-blue-500 rounded-full w-2 h-2 mt-2"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("p",{className:"text-sm font-medium",children:[e?.recentInteractions," intera\xe7\xf5es registradas"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Nos \xfaltimos 7 dias - Acompanhe o progresso na p\xe1gina de leads"})]})]})})})]}),(0,t.jsxs)(r.Zb,{children:[(0,t.jsxs)(r.Ol,{children:[(0,t.jsxs)(r.ll,{className:"flex items-center",children:[(0,t.jsx)(j.Z,{className:"h-5 w-5 mr-2 text-yellow-600"}),"Alertas e Pr\xf3ximas A\xe7\xf5es"]}),(0,t.jsx)(r.SZ,{children:"Itens que requerem aten\xe7\xe3o"})]}),(0,t.jsx)(r.aY,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,t.jsxs)("span",{className:"font-medium text-red-800",children:[e?.leadsPerStatus?.find(e=>"NAO_CONTATADO"===e.status)?.count||0," leads n\xe3o contatados"]})]}),(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"Requerem primeiro contato"})]}),(0,t.jsxs)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,t.jsxs)("span",{className:"font-medium text-yellow-800",children:[e?.leadsPerPriority?.find(e=>"ALTA"===e.priority)?.count||0," leads de alta prioridade"]})]}),(0,t.jsx)("p",{className:"text-sm text-yellow-600 mt-1",children:"Precisam de aten\xe7\xe3o priorit\xe1ria"})]}),(0,t.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,t.jsxs)("span",{className:"font-medium text-blue-800",children:[e?.recentInteractions||0," intera\xe7\xf5es esta semana"]})]}),(0,t.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"Atividade dos vendedores"})]})]})})]})]})]})})}},66772:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(42154).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}},function(e){e.O(0,[676,539,994,569,457,972,908,386,156,744],function(){return e(e.s=79425)}),_N_E=e.O()}]);