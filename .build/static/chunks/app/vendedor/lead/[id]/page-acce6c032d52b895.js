(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[383],{24198:function(e,a,t){Promise.resolve().then(t.bind(t,59664))},59664:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return G}});var s=t(15444),r=t(89300),i=t(79047),l=t(74018),o=t(99827),n=t(2422),c=t(74678),d=t(34635),u=t(67012),m=t(33201),p=t(66772),x=t(63751),h=t(16997),f=t(77248),v=t(65522);let j=m.fC;m.ZA;let g=m.B4,b=r.forwardRef(({className:e,children:a,loading:t,error:r,...i},l)=>(0,s.jsxs)(m.xz,{ref:l,className:(0,v.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t&&"cursor-wait opacity-75",r&&"border-red-500 ring-red-500",e),disabled:t||i.disabled,...i,children:[a,(0,s.jsx)(m.JO,{asChild:!0,children:t?(0,s.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):r?(0,s.jsx)(p.Z,{className:"h-4 w-4 text-red-500"}):(0,s.jsx)(x.Z,{className:"h-4 w-4 opacity-50"})})]}));b.displayName="SelectTriggerImproved";let N=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(m.u_,{ref:t,className:(0,v.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:(0,s.jsx)(h.Z,{className:"h-4 w-4"})}));N.displayName="SelectScrollUpButtonImproved";let y=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(m.$G,{ref:t,className:(0,v.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:(0,s.jsx)(x.Z,{className:"h-4 w-4"})}));y.displayName="SelectScrollDownButtonImproved";let A=r.forwardRef(({className:e,children:a,position:t="popper",...r},i)=>(0,s.jsx)(m.h_,{children:(0,s.jsxs)(m.VY,{ref:i,className:(0,v.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[(0,s.jsx)(N,{}),(0,s.jsx)(m.l_,{className:(0,v.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(y,{})]})}));A.displayName="SelectContentImproved",r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(m.__,{ref:t,className:(0,v.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName="SelectLabelImproved";let C=r.forwardRef(({className:e,children:a,checkIcon:t=!0,value:i,...l},o)=>{let n=r.useMemo(()=>i&&"string"==typeof i&&""!==i.trim()?i.trim():(console.warn("SelectItem received invalid value:",i,'defaulting to "default"'),"default"),[i]);return(0,s.jsxs)(m.ck,{ref:o,className:(0,v.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),value:n,...l,children:[t&&(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(m.wU,{children:(0,s.jsx)(f.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(m.eT,{children:a})]})});C.displayName="SelectItemImproved",r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(m.Z0,{ref:t,className:(0,v.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName="SelectSeparatorImproved";let D=(e,a)=>{let[t,s]=r.useState(e||""),[i,l]=r.useState(!1),[o,n]=r.useState(""),c=r.useCallback(e=>{if(a&&!a.some(a=>a.value===e)&&""!==e){n(`Invalid option selected: ${e}`);return}n(""),s(e)},[a]),d=r.useMemo(()=>a?a.filter(e=>e&&"object"==typeof e&&"string"==typeof e.value&&""!==e.value.trim()&&"string"==typeof e.label&&""!==e.label.trim()).map(e=>({value:e.value.trim(),label:e.label.trim()})):[],[a]);return{value:t,setValue:c,isOpen:i,setIsOpen:l,error:o,safeOptions:d,hasValidOptions:d.length>0}};var w=t(95854),S=t(33485),E=t(42154);let O=(0,E.Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),R=[{value:"LIGACAO",label:"Liga\xe7\xe3o"},{value:"EMAIL",label:"Email"},{value:"WHATSAPP",label:"WhatsApp"},{value:"REUNIAO",label:"Reuni\xe3o"},{value:"PROPOSTA",label:"Proposta"},{value:"CONTRATO",label:"Contrato"},{value:"OBSERVACAO",label:"Observa\xe7\xe3o"}],k={LIGACAO:[{label:"\uD83D\uDCDE Liga\xe7\xe3o de apresenta\xe7\xe3o - Cliente interessado",text:"Realizada liga\xe7\xe3o para apresentar os servi\xe7os de recupera\xe7\xe3o de seguro prestamista. Cliente demonstrou interesse e solicitou mais informa\xe7\xf5es."},{label:"\uD83D\uDCDE Tentativa de contato - Reagendar",text:"Tentativa de contato por liga\xe7\xe3o. N\xe3o foi poss\xedvel falar com o respons\xe1vel. Secret\xe1ria informou melhor hor\xe1rio para retorno."},{label:"\uD83D\uDCDE Follow-up - Cliente analisando",text:"Liga\xe7\xe3o de follow-up. Cliente esclareceu d\xfavidas sobre o processo e est\xe1 analisando a proposta internamente."}],EMAIL:[{label:"\uD83D\uDCE7 Email de apresenta\xe7\xe3o",text:"Enviado email com apresenta\xe7\xe3o dos servi\xe7os e casos de sucesso na recupera\xe7\xe3o de seguro prestamista."},{label:"\uD83D\uDCE7 Envio de documentos",text:"Enviados documentos complementares e cronograma do processo de recupera\xe7\xe3o conforme solicitado pelo cliente."},{label:"\uD83D\uDCE7 Follow-up p\xf3s-proposta",text:"Email de follow-up verificando o andamento da an\xe1lise interna e oferecendo esclarecimentos adicionais."}],WHATSAPP:[{label:"\uD83D\uDCAC WhatsApp - Agendamento de reuni\xe3o",text:"Contato via WhatsApp para agendar reuni\xe3o presencial ou por videoconfer\xeancia para apresenta\xe7\xe3o detalhada dos servi\xe7os."},{label:"\uD83D\uDCAC Envio de material informativo",text:"Enviado material informativo via WhatsApp com cases de sucesso e depoimentos de outros clientes."},{label:"\uD83D\uDCAC Esclarecimento de d\xfavidas",text:"Resposta r\xe1pida a d\xfavidas do cliente via WhatsApp. Esclarecimentos sobre prazos e documenta\xe7\xe3o necess\xe1ria."}],REUNIAO:[{label:"\uD83E\uDD1D Reuni\xe3o presencial - Apresenta\xe7\xe3o",text:"Reuni\xe3o presencial na empresa do cliente. Apresenta\xe7\xe3o completa dos servi\xe7os e an\xe1lise preliminar do caso."},{label:"\uD83C\uDFA5 Videoconfer\xeancia - Alinhamento final",text:"Videoconfer\xeancia para alinhamento final dos termos contratuais e esclarecimento de \xfaltimas d\xfavidas antes da assinatura."},{label:"\uD83D\uDCCA Reuni\xe3o de acompanhamento",text:"Reuni\xe3o de acompanhamento do processo. Apresenta\xe7\xe3o do status atual e pr\xf3ximos passos do caso."}],PROPOSTA:[{label:"\uD83D\uDCCB Proposta comercial enviada",text:"Enviada proposta comercial personalizada com valores, prazos e condi\xe7\xf5es espec\xedficas para o caso do cliente."},{label:"✏️ Proposta ajustada",text:"Ajustes realizados na proposta conforme solicita\xe7\xf5es do cliente. Nova vers\xe3o enviada para an\xe1lise final."},{label:"⏰ Follow-up da proposta",text:"Follow-up da proposta enviada. Cliente solicitou prazo adicional para an\xe1lise interna e aprova\xe7\xe3o."}],CONTRATO:[{label:"✅ Contrato assinado - Processo iniciado",text:"Contrato assinado e processo iniciado. Documenta\xe7\xe3o recebida e an\xe1lise t\xe9cnica em andamento."},{label:"\uD83D\uDCDD Revis\xe3o final do contrato",text:"Revis\xe3o final do contrato com cliente. Esclarecimentos sobre cl\xe1usulas e assinatura agendada."},{label:"\uD83D\uDD10 Contrato para assinatura digital",text:"Contrato enviado para assinatura digital. Cliente recebeu instru\xe7\xf5es para finaliza\xe7\xe3o do processo."}],OBSERVACAO:[{label:"\uD83D\uDCDD Cliente solicitou mais tempo",text:"Cliente precisa de mais tempo para an\xe1lise interna. Reagendado contato para pr\xf3xima semana."},{label:"⏳ Aguardando aprova\xe7\xe3o interna",text:"Cliente demonstrou interesse, mas est\xe1 aguardando aprova\xe7\xe3o da diretoria. Manter acompanhamento semanal."},{label:"\uD83D\uDCA4 Sem interesse no momento",text:"Cliente n\xe3o demonstrou interesse no momento. Manter no pipeline para contato futuro em 3 meses."}]};function T({leadId:e,onSuccess:a,onCancel:t}){let{toast:i}=(0,w.pm)(),[l,o]=(0,r.useState)(!1),[c,m]=(0,r.useState)(""),[p,x]=(0,r.useState)(""),{value:h,setValue:f,error:v,hasValidOptions:N}=D("",R),y=(0,r.useMemo)(()=>h&&h in k&&k[h]||[],[h]),E=async()=>{if(!h||""===h.trim()){i({title:"Erro de Valida\xe7\xe3o",description:"Selecione o tipo de intera\xe7\xe3o",variant:"destructive"});return}if(!c||""===c.trim()){i({title:"Erro de Valida\xe7\xe3o",description:"Preencha a descri\xe7\xe3o da intera\xe7\xe3o",variant:"destructive"});return}o(!0);try{let t=await fetch("/api/interactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e,tipo:h,descricao:c.trim(),resultado:p.trim()||null})});if(t.ok)i({title:"Sucesso",description:"Intera\xe7\xe3o adicionada com sucesso"}),a();else{let e=await t.json();throw Error(e.error||"Erro ao adicionar intera\xe7\xe3o")}}catch(e){console.error("Erro ao adicionar intera\xe7\xe3o:",e),i({title:"Erro",description:e instanceof Error?e.message:"Erro ao adicionar intera\xe7\xe3o",variant:"destructive"})}finally{o(!1)}},T=e=>{m(e.text)};return(0,s.jsxs)("div",{className:"space-y-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h4",{className:"font-medium text-lg",children:"Adicionar Nova Intera\xe7\xe3o"}),(0,s.jsx)(n.z,{variant:"ghost",onClick:t,size:"sm",children:(0,s.jsx)(S.Z,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"interaction-type",children:"Tipo de Intera\xe7\xe3o *"}),(0,s.jsxs)(j,{value:h,onValueChange:f,children:[(0,s.jsx)(b,{id:"interaction-type",loading:l,error:!!v,className:"mt-1",children:(0,s.jsx)(g,{placeholder:"Selecione o tipo de intera\xe7\xe3o"})}),(0,s.jsx)(A,{children:N?R.map(e=>(0,s.jsx)(C,{value:e.value,children:e.label},e.value)):(0,s.jsx)("div",{className:"p-2 text-sm text-gray-500",children:"Nenhuma op\xe7\xe3o dispon\xedvel"})})]}),v&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:v})]}),y.length>0&&(0,s.jsxs)("div",{className:"bg-blue-50 p-3 rounded-md",children:[(0,s.jsx)(d._,{className:"text-blue-800 font-medium",children:"Templates Sugeridos:"}),(0,s.jsx)("div",{className:"mt-2 space-y-2",children:y.map((e,a)=>(0,s.jsx)(n.z,{variant:"outline",size:"sm",className:"text-xs w-full justify-start text-left h-auto p-2",onClick:()=>T(e),type:"button",children:e.label},a))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"description",children:"Descri\xe7\xe3o *"}),(0,s.jsx)(u.g,{id:"description",value:c,onChange:e=>m(e.target.value),placeholder:"Ex: Realizada liga\xe7\xe3o para apresentar os servi\xe7os. Cliente demonstrou interesse e solicitou proposta comercial.",rows:4,className:"mt-1",disabled:l})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"result",children:"Resultado/Pr\xf3ximo Passo"}),(0,s.jsx)(u.g,{id:"result",value:p,onChange:e=>x(e.target.value),placeholder:"Ex: Proposta a ser enviada at\xe9 sexta-feira. Agendar follow-up para pr\xf3xima ter\xe7a-feira.",rows:3,className:"mt-1",disabled:l})]}),(0,s.jsxs)("div",{className:"flex space-x-3 pt-2",children:[(0,s.jsxs)(n.z,{onClick:E,disabled:l||!h||!c.trim(),className:"bg-[#D4AF37] hover:bg-[#B8941F] text-black",children:[l?(0,s.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent mr-2"}):(0,s.jsx)(O,{className:"h-4 w-4 mr-2"}),l?"Salvando...":"Salvar Intera\xe7\xe3o"]}),(0,s.jsx)(n.z,{variant:"outline",onClick:t,disabled:l,children:"Cancelar"})]})]})]})}let I=[{value:"NAO_CONTATADO",label:"N\xe3o Contatado"},{value:"POTENCIAL",label:"Contato Realizado"},{value:"EM_ANALISE",label:"Qualifica\xe7\xe3o"},{value:"PROCESSO_INICIADO",label:"Proposta Enviada"},{value:"VALOR_RECUPERADO",label:"Negocia\xe7\xe3o"},{value:"CONTRATO_ASSINADO",label:"Fechado Ganho"},{value:"PERDIDO",label:"Fechado Perdido"}];function P({value:e,onValueChange:a,placeholder:t="Selecione o status",loading:r,error:i,className:l}){let{value:o,setValue:n,error:c,hasValidOptions:d}=D(e,I);return(0,s.jsxs)(j,{value:o,onValueChange:e=>{n(e),a(e)},children:[(0,s.jsx)(b,{loading:r,error:i||!!c,className:l,children:(0,s.jsx)(g,{placeholder:t})}),(0,s.jsx)(A,{children:d?I.map(e=>(0,s.jsx)(C,{value:e.value,children:e.label},e.value)):(0,s.jsx)("div",{className:"p-2 text-sm text-gray-500",children:"Nenhuma op\xe7\xe3o dispon\xedvel"})})]})}[...I];var M=t(61335);let _=(0,E.Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),z=(0,E.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var Z=t(4693),L=t(58510),V=t(35798),F=t(28576),B=t(20730);let H=(0,E.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var U=t(39429),W=t(26771),$=t(75012),q=t(41084);function G(){let e=(0,i.useParams)();(0,i.useRouter)();let{toast:a}=(0,w.pm)(),[t,m]=(0,r.useState)(null),[p,x]=(0,r.useState)(!0),[h,f]=(0,r.useState)(!1),[v,j]=(0,r.useState)(""),[g,b]=(0,r.useState)(""),[N,y]=(0,r.useState)(""),[A,C]=(0,r.useState)(""),[D,E]=(0,r.useState)(!1),[R,k]=(0,r.useState)(null),[I,G]=(0,r.useState)({});(0,r.useEffect)(()=>{e.id&&Y()},[e.id]);let Y=async()=>{try{let t=await fetch(`/api/leads/${e.id}`);if(t.ok){let e=await t.json();m(e),j(e.status),b(e.proximaAcao||""),y(e.dataProximaAcao?e.dataProximaAcao.split("T")[0]:""),C(e.observacoesContato||"")}else a({title:"Erro",description:"Erro ao carregar lead",variant:"destructive"})}catch(e){a({title:"Erro",description:"Erro ao carregar lead",variant:"destructive"})}finally{x(!1)}},J=async()=>{f(!0);try{(await fetch(`/api/leads/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:v,proximaAcao:g,dataProximaAcao:N?new Date(N).toISOString():null,observacoesContato:A})})).ok?(a({title:"Sucesso",description:"Lead atualizado com sucesso"}),Y()):a({title:"Erro",description:"Erro ao atualizar lead",variant:"destructive"})}catch(e){a({title:"Erro",description:"Erro ao atualizar lead",variant:"destructive"})}finally{f(!1)}},Q=(e,a)=>{k(e),G({[e]:a})},X=()=>{k(null),G({})},K=async t=>{try{(await fetch(`/api/leads/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({[t]:I[t]})})).ok?(a({title:"Sucesso",description:"Campo atualizado com sucesso"}),k(null),G({}),Y()):a({title:"Erro",description:"Erro ao atualizar campo",variant:"destructive"})}catch(e){a({title:"Erro",description:"Erro ao atualizar campo",variant:"destructive"})}},ee=({field:e,value:a,label:t,type:r="text"})=>{let i=R===e,l=I[e]??a;return i?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(d._,{children:t}),"currency"===r?(0,s.jsx)(c.I,{type:"number",value:l||"",onChange:a=>G({...I,[e]:parseFloat(a.target.value)||0}),className:"mt-1",placeholder:"0.00"}):(0,s.jsx)(c.I,{type:r,value:l||"",onChange:a=>G({...I,[e]:a.target.value}),className:"mt-1"})]}),(0,s.jsxs)("div",{className:"flex space-x-1 mt-6",children:[(0,s.jsx)(n.z,{size:"sm",onClick:()=>K(e),className:"h-8 w-8 p-0",children:(0,s.jsx)(O,{className:"h-3 w-3"})}),(0,s.jsx)(n.z,{size:"sm",variant:"outline",onClick:X,className:"h-8 w-8 p-0",children:(0,s.jsx)(S.Z,{className:"h-3 w-3"})})]})]}):(0,s.jsxs)("div",{className:"group",children:[(0,s.jsx)(d._,{children:t}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,s.jsx)("p",{className:"font-medium flex-1",children:"currency"===r&&a?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a):a||"N\xe3o informado"}),(0,s.jsx)(n.z,{size:"sm",variant:"ghost",onClick:()=>Q(e,a),className:"opacity-0 group-hover:opacity-100 transition-opacity h-8 w-8 p-0",children:(0,s.jsx)(_,{className:"h-3 w-3"})})]})]})},ea=e=>{switch(e){case"LIGACAO":return"Liga\xe7\xe3o";case"EMAIL":return"Email";case"WHATSAPP":return"WhatsApp";case"REUNIAO":return"Reuni\xe3o";case"PROPOSTA":return"Proposta";case"CONTRATO":return"Contrato";case"OBSERVACAO":return"Observa\xe7\xe3o";default:return e}};return p?(0,s.jsx)(l.L,{requiredRole:"VENDEDOR",children:(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),(0,s.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})})}):t?(0,s.jsx)(l.L,{requiredRole:"VENDEDOR",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(q.default,{href:"/vendedor",children:(0,s.jsxs)(n.z,{variant:"ghost",className:"mb-2",children:[(0,s.jsx)(z,{className:"h-4 w-4 mr-2"}),"Voltar para Meus Leads"]})}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:t.razaoSocial}),t.nomeFantasia&&(0,s.jsxs)("p",{className:"text-gray-600",children:["Nome Fantasia: ",t.nomeFantasia]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,s.jsx)(M.C,{className:(e=>{switch(e){case"NAO_CONTATADO":return"bg-red-100 text-red-800";case"POTENCIAL":return"bg-yellow-100 text-yellow-800";case"EM_ANALISE":return"bg-blue-100 text-blue-800";case"CONTRATO_ASSINADO":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(t.status),children:(e=>{switch(e){case"NAO_CONTATADO":return"N\xe3o Contatado";case"POTENCIAL":return"Contato Realizado";case"EM_ANALISE":return"Qualifica\xe7\xe3o";case"PROCESSO_INICIADO":return"Proposta Enviada";case"VALOR_RECUPERADO":return"Negocia\xe7\xe3o";case"CONTRATO_ASSINADO":return"Fechado Ganho";case"PERDIDO":return"Fechado Perdido";default:return e}})(t.status)}),(0,s.jsxs)(M.C,{variant:"outline",children:["Prioridade: ",t.prioridade]})]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Valor Estimado"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(0,s.jsx)(ee,{field:"valorEstimadoRecuperacao",value:t.valorEstimadoRecuperacao,label:"",type:"currency"})})]})})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)(o.Zb,{children:[(0,s.jsx)(o.Ol,{children:(0,s.jsxs)(o.ll,{className:"flex items-center",children:[(0,s.jsx)(Z.Z,{className:"h-5 w-5 mr-2"}),"Dados de Contato"]})}),(0,s.jsxs)(o.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(L.Z,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(ee,{field:"telefonePrincipal",value:t.telefonePrincipal,label:"Telefone Principal"})})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(L.Z,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(ee,{field:"telefoneSecundario",value:t.telefoneSecundario,label:"Telefone Secund\xe1rio"})})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(V.Z,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(ee,{field:"email",value:t.email,label:"E-mail"})})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(Z.Z,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(ee,{field:"contatoPrincipal",value:t.contatoPrincipal?`${t.contatoPrincipal} ${t.cargo?`(${t.cargo})`:""}`:"",label:"Contato Principal"})})]})]}),(t.endereco||t.municipio)&&(0,s.jsxs)("div",{className:"flex items-start space-x-2 pt-2",children:[(0,s.jsx)(F.Z,{className:"h-4 w-4 text-gray-500 mt-1"}),(0,s.jsxs)("div",{children:[t.endereco&&(0,s.jsx)("p",{children:t.endereco}),(t.municipio||t.uf)&&(0,s.jsxs)("p",{children:[t.municipio,", ",t.uf," ",t.cep&&`- ${t.cep}`]})]})]})]})]}),(0,s.jsxs)(o.Zb,{children:[(0,s.jsx)(o.Ol,{children:(0,s.jsxs)(o.ll,{className:"flex items-center",children:[(0,s.jsx)(B.Z,{className:"h-5 w-5 mr-2"}),"Informa\xe7\xf5es Comerciais"]})}),(0,s.jsxs)(o.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.cnpj&&(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{children:"CNPJ"}),(0,s.jsx)("p",{className:"font-medium",children:t.cnpj})]}),t.setor&&(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{children:"Setor"}),(0,s.jsx)("p",{className:"font-medium",children:t.setor})]}),t.contratosBancarios&&(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{children:"Contratos Banc\xe1rios"}),(0,s.jsx)("p",{className:"font-medium",children:t.contratosBancarios})]}),t.instituicoesFinanceiras&&(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{children:"Institui\xe7\xf5es Financeiras"}),(0,s.jsx)("p",{className:"font-medium",children:t.instituicoesFinanceiras})]})]}),t.observacoes&&(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{children:"Observa\xe7\xf5es Gerais"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-700 bg-gray-50 p-3 rounded-md",children:t.observacoes})]})]})]}),(0,s.jsxs)(o.Zb,{children:[(0,s.jsx)(o.Ol,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(o.ll,{className:"flex items-center",children:[(0,s.jsx)(H,{className:"h-5 w-5 mr-2"}),"Hist\xf3rico de Intera\xe7\xf5es"]}),(0,s.jsxs)(n.z,{onClick:()=>E(!D),className:"bg-[#D4AF37] hover:bg-[#B8941F] text-black",children:[(0,s.jsx)(U.Z,{className:"h-4 w-4 mr-2"}),"Nova Intera\xe7\xe3o"]})]})}),(0,s.jsxs)(o.aY,{children:[D&&(0,s.jsx)(T,{leadId:e.id,onSuccess:()=>{E(!1),Y()},onCancel:()=>E(!1)}),(0,s.jsx)("div",{className:"space-y-4",children:t.interactions&&t.interactions.length>0?t.interactions.map(e=>(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)(M.C,{variant:"outline",children:ea(e.tipo)}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[new Date(e.dataContato).toLocaleDateString("pt-BR")," \xe0s"," ",new Date(e.dataContato).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})," - ",e.user.name]})]}),(0,s.jsx)("p",{className:"text-gray-700 mb-2",children:e.descricao}),e.resultado&&(0,s.jsxs)("p",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:[(0,s.jsx)("strong",{children:"Resultado:"})," ",e.resultado]})]},e.id)):(0,s.jsx)("p",{className:"text-gray-500 text-center py-8",children:"Nenhuma intera\xe7\xe3o registrada ainda"})})]})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(o.Zb,{children:[(0,s.jsx)(o.Ol,{children:(0,s.jsxs)(o.ll,{className:"flex items-center",children:[(0,s.jsx)(W.Z,{className:"h-5 w-5 mr-2"}),"A\xe7\xf5es do Lead"]})}),(0,s.jsxs)(o.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{children:"Status do Lead"}),(0,s.jsx)(P,{value:v,onValueChange:j,loading:h,className:"mt-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{children:"Pr\xf3xima A\xe7\xe3o"}),(0,s.jsx)(u.g,{value:g,onChange:e=>b(e.target.value),placeholder:"Descreva a pr\xf3xima a\xe7\xe3o..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{children:"Data da Pr\xf3xima A\xe7\xe3o"}),(0,s.jsx)(c.I,{type:"date",value:N,onChange:e=>y(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{children:"Observa\xe7\xf5es de Contato"}),(0,s.jsx)(u.g,{value:A,onChange:e=>C(e.target.value),placeholder:"Adicione observa\xe7\xf5es sobre os contatos..."})]}),(0,s.jsx)(n.z,{onClick:J,disabled:h,className:"w-full bg-[#D4AF37] hover:bg-[#B8941F] text-black",children:h?"Salvando...":"Salvar Altera\xe7\xf5es"})]})]}),t.proximaAcao&&(0,s.jsxs)(o.Zb,{children:[(0,s.jsx)(o.Ol,{children:(0,s.jsxs)(o.ll,{className:"flex items-center text-yellow-700",children:[(0,s.jsx)($.Z,{className:"h-5 w-5 mr-2"}),"Pr\xf3xima A\xe7\xe3o Agendada"]})}),(0,s.jsxs)(o.aY,{children:[(0,s.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:t.proximaAcao}),t.dataProximaAcao&&(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Data: ",new Date(t.dataProximaAcao).toLocaleDateString("pt-BR")]})]})]})]})]})]})}):(0,s.jsx)(l.L,{requiredRole:"VENDEDOR",children:(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)(o.Zb,{children:(0,s.jsxs)(o.aY,{className:"p-12 text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Lead n\xe3o encontrado"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"O lead solicitado n\xe3o foi encontrado ou voc\xea n\xe3o tem permiss\xe3o para acess\xe1-lo."}),(0,s.jsx)(q.default,{href:"/vendedor",children:(0,s.jsx)(n.z,{children:"Voltar para Meus Leads"})})]})})})})}},61335:function(e,a,t){"use strict";t.d(a,{C:function(){return o}});var s=t(15444);t(89300);var r=t(2371),i=t(65522);let l=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:a,...t}){return(0,s.jsx)("div",{className:(0,i.cn)(l({variant:a}),e),...t})}},74678:function(e,a,t){"use strict";t.d(a,{I:function(){return l}});var s=t(15444),r=t(89300),i=t(65522);let l=r.forwardRef(({className:e,type:a,...t},r)=>(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));l.displayName="Input"},34635:function(e,a,t){"use strict";t.d(a,{_:function(){return c}});var s=t(15444),r=t(89300),i=t(4100),l=t(2371),o=t(65522);let n=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(i.f,{ref:t,className:(0,o.cn)(n(),e),...a}));c.displayName=i.f.displayName},67012:function(e,a,t){"use strict";t.d(a,{g:function(){return l}});var s=t(15444),r=t(89300),i=t(65522);let l=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));l.displayName="Textarea"},95854:function(e,a,t){"use strict";t.d(a,{pm:function(){return m}});var s=t(89300);let r=0,i=new Map,l=e=>{if(i.has(e))return;let a=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,a)},o=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?l(t):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},n=[],c={toasts:[]};function d(e){c=o(c,e),n.forEach(e=>{e(c)})}function u({...e}){let a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...e,id:a,open:!0,onOpenChange:e=>{e||t()}}}),{id:a,dismiss:t,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,a]=s.useState(c);return s.useEffect(()=>(n.push(a),()=>{let e=n.indexOf(a);e>-1&&n.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},20730:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(42154).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},75012:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(42154).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},66772:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(42154).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},26771:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(42154).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},28576:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(42154).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},39429:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(42154).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4100:function(e,a,t){"use strict";t.d(a,{f:function(){return o}});var s=t(89300),r=t(57234),i=t(15444),l=s.forwardRef((e,a)=>(0,i.jsx)(r.WV.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));l.displayName="Label";var o=l}},function(e){e.O(0,[676,539,994,569,457,989,908,386,156,744],function(){return e(e.s=24198)}),_N_E=e.O()}]);